<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OS-Assignment1</title>
    <link rel="stylesheet" href="node_modules/normalize.css/normalize.css">
    <link rel="stylesheet" href="style.css">
    <script src="node_modules/vue/dist/vue.min.js"></script>
</head>
<body>
<div class="body">
    <h1 class="title">生产者-消费者模型</h1>
    <div id="list-demo" class="demo">
        <transition-group name="list" tag="p">
        <span v-for="item in items" v-bind:key="item" class="list-item">
          {{ item }}
        </span>
        </transition-group>
    </div>
</div>
</body>
<script type="text/javascript">
    let data = [1, 2, 3, 4, 5, 6, 7, 8, 9];
  //  const es = new EventSource("http://localhost:3030/data");
  //
  //  es.onmessage = (e) => {
  //    console.log(e.data);
  //  };
  //
  //  es.onerror = (e) => {
  //    console.log(`Error code is ${es.readyState}`);
  //    es.close();
  //  }

  new Vue({
    el: '#list-demo',
    data: {
      items: data,
      nextNum: 10
    },
    methods: {
      randomIndex: function () {
        return Math.floor(Math.random() * this.items.length)
      },
      add: function () {
        this.items.splice(this.randomIndex(), 0, this.nextNum++)
      },
      remove: function () {
        this.items.splice(this.randomIndex(), 1)
      },
    },
    mounted() {
      let self = this;
      setInterval(()=>{
        self.items = self.items.map(item => item*2);
      }, 5000)
    }
  })
</script>
</html>